{% extends "base.html" %}

{% block title %}Calendar - TaskFlow{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/calendar.css') }}">
{% endblock %}

{% block content %}
<div class="calendar-page">
    <div class="calendar-header">
        <h1><i class="fas fa-calendar-alt"></i> Calendar</h1>
        <button class="btn btn-primary" onclick="openEventModal()">
            <i class="fas fa-plus"></i> Add Event
        </button>
    </div>
    
    <div class="calendar-container">
        <div class="calendar-nav">
            <button class="btn btn-icon" id="prev-month"><i class="fas fa-chevron-left"></i></button>
            <h2 id="current-month">January 2024</h2>
            <button class="btn btn-icon" id="next-month"><i class="fas fa-chevron-right"></i></button>
            <button class="btn btn-secondary" id="today-btn">Today</button>
        </div>
        
        <div class="calendar-grid">
            <div class="calendar-weekdays">
                <div>Sun</div>
                <div>Mon</div>
                <div>Tue</div>
                <div>Wed</div>
                <div>Thu</div>
                <div>Fri</div>
                <div>Sat</div>
            </div>
            <div class="calendar-days" id="calendar-days">
                <!-- Calendar days will be generated here -->
            </div>
        </div>
    </div>
    
    <div class="upcoming-events">
        <h3><i class="fas fa-clock"></i> Upcoming Events & Deadlines</h3>
        <div class="events-list" id="upcoming-list">
            <!-- Upcoming events will be loaded here -->
        </div>
    </div>
</div>

<!-- Event Form Template -->
<template id="event-form-template">
    <form id="event-form" onsubmit="saveEvent(event)">
        <input type="hidden" id="event-id" name="id">
        
        <div class="form-group">
            <label for="event-title">Title *</label>
            <input type="text" id="event-title" name="title" required placeholder="Event title">
        </div>
        
        <div class="form-group">
            <label for="event-description">Description</label>
            <textarea id="event-description" name="description" rows="3" placeholder="Event description"></textarea>
        </div>
        
        <div class="form-group">
            <label class="checkbox-label">
                <input type="checkbox" id="event-allday" name="allDay" onchange="toggleTimeInputs()">
                All Day Event
            </label>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="event-start">Start *</label>
                <input type="datetime-local" id="event-start" name="start" required>
            </div>
            
            <div class="form-group">
                <label for="event-end">End</label>
                <input type="datetime-local" id="event-end" name="end">
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="event-color">Color</label>
                <input type="color" id="event-color" name="color" value="#3498db">
            </div>
            
            <div class="form-group flex-grow">
                <label for="event-location">Location</label>
                <input type="text" id="event-location" name="location" placeholder="Event location">
            </div>
        </div>
        
        <div class="form-group">
            <label for="event-reminder">Reminder (minutes before)</label>
            <select id="event-reminder" name="reminder">
                <option value="0">No reminder</option>
                <option value="5">5 minutes</option>
                <option value="15">15 minutes</option>
                <option value="30">30 minutes</option>
                <option value="60">1 hour</option>
                <option value="1440">1 day</option>
            </select>
        </div>
        
        <div class="form-actions">
            <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
            <button type="button" class="btn btn-danger" id="delete-event-btn" onclick="deleteEvent()" style="display: none;">Delete</button>
            <button type="submit" class="btn btn-primary">Save Event</button>
        </div>
    </form>
</template>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/calendar.js') }}"></script>
{% endblock %}
